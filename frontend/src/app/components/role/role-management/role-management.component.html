<div class="p-6 bg-white rounded-lg shadow-md">
  <!-- Messages -->
  <div
    *ngIf="error"
    class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"
  >
    {{ error }}
    <button
      (click)="clearMessages()"
      class="float-right text-red-700 hover:text-red-900"
    >
      ×
    </button>
  </div>
  <div
    *ngIf="successMessage"
    class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"
  >
    {{ successMessage }}
    <button
      (click)="clearMessages()"
      class="float-right text-green-700 hover:text-green-900"
    >
      ×
    </button>
  </div>

  <!-- Create Role Form -->
  <div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Create New Role</h2>
    <div class="flex gap-4">
      <input
        type="text"
        [(ngModel)]="newRoleName"
        placeholder="Enter role name"
        class="flex-1 px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <button
        (click)="createRole()"
        [disabled]="loading"
        class="px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50"
      >
        Create Role
      </button>
    </div>
  </div>

  <!-- Roles List -->
  <div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Existing Roles</h2>
    <div *ngIf="loading" class="text-center py-4">
      <div
        class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"
      ></div>
    </div>
    <div
      *ngIf="!loading && roles.length === 0"
      class="text-gray-500 text-center py-4"
    >
      No roles found
    </div>
    <div *ngIf="!loading && roles.length > 0" class="grid gap-4">
      <div
        *ngFor="let role of roles"
        class="flex items-center justify-between p-4 bg-gray-50 rounded"
      >
        <span class="font-medium">{{ role }}</span>
        <div class="flex gap-2">
          <button
            (click)="viewUsersInRole(role)"
            class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"
          >
            View Users
          </button>
          <button
            (click)="deleteRole(role)"
            class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Users in Role -->
  <div *ngIf="selectedRole" class="mt-8">
    <h2 class="text-2xl font-bold mb-4">Users in Role: {{ selectedRole }}</h2>
    <div *ngIf="loading" class="text-center py-4">
      <div
        class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"
      ></div>
    </div>
    <div
      *ngIf="!loading && usersInRole.length === 0"
      class="text-gray-500 text-center py-4"
    >
      No users found in this role
    </div>
    <div *ngIf="!loading && usersInRole.length > 0" class="grid gap-4">
      <div *ngFor="let user of usersInRole" class="p-4 bg-gray-50 rounded">
        <div class="flex items-center justify-between">
          <div>
            <p class="font-medium">{{ user.email }}</p>
            <p class="text-sm text-gray-500">{{ user.id }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
